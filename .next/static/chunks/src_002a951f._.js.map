{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/exam-timer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { parseISO, differenceInSeconds } from 'date-fns';\nimport { Card, CardContent } from './ui/card';\nimport { Clock } from 'lucide-react';\n\ntype ExamTimerProps = {\n  endTime: string;\n  onTimeUp: () => void;\n};\n\nexport function ExamTimer({ endTime, onTimeUp }: ExamTimerProps) {\n  const [remaining, setRemaining] = useState<number | null>(null);\n\n  useEffect(() => {\n    const end = parseISO(endTime);\n    const calculateRemaining = () => differenceInSeconds(end, new Date());\n    \n    setRemaining(calculateRemaining());\n\n    const interval = setInterval(() => {\n      const secondsLeft = calculateRemaining();\n      setRemaining(secondsLeft);\n      if (secondsLeft <= 0) {\n        clearInterval(interval);\n        onTimeUp();\n      }\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [endTime, onTimeUp]);\n\n  const formatTime = (totalSeconds: number) => {\n    if (totalSeconds < 0) totalSeconds = 0;\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n  };\n\n  const isCritical = remaining !== null && remaining <= 300; // 5 minutes\n\n  return (\n    <Card className={`transition-colors ${isCritical ? 'bg-destructive/10 border-destructive' : ''}`}>\n      <CardContent className=\"p-4\">\n        <div className={`flex items-center justify-center font-mono text-2xl font-bold ${isCritical ? 'text-destructive' : 'text-primary'}`}>\n          <Clock className=\"mr-3 h-6 w-6\" />\n          <span>\n            {remaining !== null ? formatTime(remaining) : 'Yüklənir...'}\n          </span>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAYO,SAAS,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAkB;;IAC7D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAE1D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,MAAM,MAAM,CAAA,GAAA,2IAAA,CAAA,WAAQ,AAAD,EAAE;YACrB,MAAM;0DAAqB,IAAM,CAAA,GAAA,sJAAA,CAAA,sBAAmB,AAAD,EAAE,KAAK,IAAI;;YAE9D,aAAa;YAEb,MAAM,WAAW;gDAAY;oBAC3B,MAAM,cAAc;oBACpB,aAAa;oBACb,IAAI,eAAe,GAAG;wBACpB,cAAc;wBACd;oBACF;gBACF;+CAAG;YAEH;uCAAO,IAAM,cAAc;;QAC7B;8BAAG;QAAC;QAAS;KAAS;IAEtB,MAAM,aAAa,CAAC;QAClB,IAAI,eAAe,GAAG,eAAe;QACrC,MAAM,QAAQ,KAAK,KAAK,CAAC,eAAe;QACxC,MAAM,UAAU,KAAK,KAAK,CAAC,AAAC,eAAe,OAAQ;QACnD,MAAM,UAAU,eAAe;QAC/B,OAAO,GAAG,OAAO,OAAO,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,OAAO,SAAS,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,OAAO,SAAS,QAAQ,CAAC,GAAG,MAAM;IACpH;IAEA,MAAM,aAAa,cAAc,QAAQ,aAAa,KAAK,YAAY;IAEvE,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAW,CAAC,kBAAkB,EAAE,aAAa,yCAAyC,IAAI;kBAC9F,cAAA,6LAAC,mIAAA,CAAA,cAAW;YAAC,WAAU;sBACrB,cAAA,6LAAC;gBAAI,WAAW,CAAC,8DAA8D,EAAE,aAAa,qBAAqB,gBAAgB;;kCACjI,6LAAC,uMAAA,CAAA,QAAK;wBAAC,WAAU;;;;;;kCACjB,6LAAC;kCACE,cAAc,OAAO,WAAW,aAAa;;;;;;;;;;;;;;;;;;;;;;AAM1D;GA3CgB;KAAA","debugId":null}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/radio-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6LAAC,6KAAA,CAAA,OAAwB;QACvB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;QAC3B,GAAG,KAAK;QACT,KAAK;;;;;;AAGX;;AACA,WAAW,WAAW,GAAG,6KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,+BAAiB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6LAAC,6KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4OACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,6KAAA,CAAA,YAA6B;YAAC,WAAU;sBACvC,cAAA,6LAAC,yMAAA,CAAA,SAAM;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI1B;;AACA,eAAe,WAAW,GAAG,6KAAA,CAAA,OAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf;KAVS","debugId":null}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/firebase/config.ts"],"sourcesContent":["\"use client\";\n\n// Import the functions you need from the SDKs you need\nimport { initializeApp, getApps, getApp } from \"firebase/app\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBL7WCyXuYTqteEDUoSB3S79akpGU6XstA\",\n  authDomain: \"studio-461864257-d9b57.firebaseapp.com\",\n  projectId: \"studio-461864257-d9b57\",\n  storageBucket: \"studio-461864257-d9b57.firebasestorage.app\",\n  messagingSenderId: \"952093304826\",\n  appId: \"1:952093304826:web:c208c1c171f524fac1e643\"\n};\n\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n\nexport { app };\n"],"names":[],"mappings":";;;AAEA,uDAAuD;AACvD;AAAA;AAHA;;AAKA,wCAAwC;AACxC,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAGA,sBAAsB;AACtB,MAAM,MAAM,CAAC,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,uLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,uLAAA,CAAA,SAAM,AAAD","debugId":null}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/withAuth.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Loader } from 'lucide-react';\n\nconst withAuth = <P extends object>(\n  WrappedComponent: React.ComponentType<P>,\n  allowedRoles: ('teacher' | 'student')[]\n) => {\n  const AuthComponent = (props: P) => {\n    const router = useRouter();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n      const userRole = localStorage.getItem('userRole');\n      \n      if (!userRole || !allowedRoles.includes(userRole as any)) {\n        router.replace('/');\n      } else {\n        setIsLoading(false);\n      }\n    }, [router]);\n\n    if (isLoading) {\n      return (\n        <main className=\"flex min-h-screen w-full flex-col items-center justify-center space-y-4 p-4\">\n          <Loader className=\"h-8 w-8 animate-spin\" />\n          <p className=\"text-muted-foreground\">Yoxlanılır...</p>\n        </main>\n      );\n    }\n\n    return <WrappedComponent {...props} />;\n  };\n\n  AuthComponent.displayName = `withAuth(${WrappedComponent.displayName || WrappedComponent.name || 'Component'})`;\n\n  return AuthComponent;\n};\n\nexport default withAuth;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,WAAW,CACf,kBACA;;IAEA,MAAM,gBAAgB,CAAC;;QACrB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;QACvB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QAE3C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gDAAE;gBACR,MAAM,WAAW,aAAa,OAAO,CAAC;gBAEtC,IAAI,CAAC,YAAY,CAAC,aAAa,QAAQ,CAAC,WAAkB;oBACxD,OAAO,OAAO,CAAC;gBACjB,OAAO;oBACL,aAAa;gBACf;YACF;+CAAG;YAAC;SAAO;QAEX,IAAI,WAAW;YACb,qBACE,6LAAC;gBAAK,WAAU;;kCACd,6LAAC,yMAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;kCAClB,6LAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;QAG3C;QAEA,qBAAO,6LAAC;YAAkB,GAAG,KAAK;;;;;;IACpC;OAxBM;;YACW,qIAAA,CAAA,YAAS;;;IAyB1B,cAAc,WAAW,GAAG,CAAC,SAAS,EAAE,iBAAiB,WAAW,IAAI,iBAAiB,IAAI,IAAI,YAAY,CAAC,CAAC;IAE/G,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/student/exam/%5BexamId%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useCallback, useRef } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport { Student, Submission, Exam } from '@/lib/types';\nimport { ExamTimer } from '@/components/exam-timer';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { ArrowLeft, Send } from 'lucide-react';\nimport Image from 'next/image';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { getFirestore, doc, getDoc, addDoc, collection } from 'firebase/firestore';\nimport { app } from '@/firebase/config';\nimport withAuth from '@/components/withAuth';\n\nfunction ExamPage() {\n  const router = useRouter();\n  const params = useParams();\n  const { toast } = useToast();\n  const examId = params.examId as string;\n  \n  const [exam, setExam] = useState<Exam | null>(null);\n  const [student, setStudent] = useState<Student | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const [answers, setAnswers] = useState<Record<string, string>>({});\n  const hasFinishedRef = useRef(false);\n  const db = getFirestore(app);\n\n  useEffect(() => {\n    const studentData = localStorage.getItem('currentStudent');\n    if (studentData) {\n      setStudent(JSON.parse(studentData));\n    } else {\n      router.push('/');\n      return;\n    }\n\n    const fetchExam = async () => {\n        if (!examId) return;\n        const examRef = doc(db, \"exams\", examId);\n        const examSnap = await getDoc(examRef);\n\n        if (examSnap.exists()) {\n            setExam({ id: examSnap.id, ...examSnap.data() } as Exam);\n        } else {\n            toast({\n                variant: \"destructive\",\n                title: \"İmtahan tapılmadı\",\n                description: \"Bu imtahan mövcud deyil və ya silinib.\"\n            });\n            router.push('/student/dashboard');\n        }\n        setIsLoading(false);\n    }\n    \n    fetchExam();\n  }, [examId, router, toast, db]);\n\n  const handleFinishExam = useCallback(async (cheating = false) => {\n    if (hasFinishedRef.current || !student || !exam) return;\n    hasFinishedRef.current = true;\n\n    const newSubmission: Omit<Submission, 'id'> = {\n      examId,\n      studentId: student.id,\n      answers,\n      submittedAt: new Date().toISOString(),\n      cheatingDetected: cheating,\n    };\n    \n    try {\n        await addDoc(collection(db, \"submissions\"), newSubmission);\n        if (cheating) {\n            toast({\n                variant: \"destructive\",\n                title: \"Köçürmə Təsbit Olundu!\",\n                description: \"Köçürdüyünüz təsbit olundu, bu səbəbdən imtahandan xaric olundunuz. Müəllim bu barədə məlumatlandırılacaq.\",\n                duration: 10000,\n            });\n        } else {\n            toast({\n              title: \"Cavablarınız qəbul edildi!\",\n              description: \"Nəticələr açıqlandıqda müəlliminiz sizi məlumatlandıracaq.\",\n            });\n        }\n        router.push(`/student/dashboard`);\n    } catch(error) {\n        console.error(\"Error submitting exam:\", error);\n        toast({\n            variant: \"destructive\",\n            title: \"Xəta\",\n            description: \"İmtahanı təhvil verərkən xəta baş verdi.\",\n        });\n        hasFinishedRef.current = false; // Allow retry\n    }\n\n  }, [examId, student, answers, router, toast, exam, db]);\n\n  useEffect(() => {\n    if (!exam || isLoading) {\n      return;\n    }\n\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'hidden') {\n        handleFinishExam(true);\n      }\n    };\n\n    const handleFullscreenChange = () => {\n      if (!document.fullscreenElement) {\n        handleFinishExam(true);\n      }\n    };\n    \n    document.documentElement.requestFullscreen().catch(err => {\n      console.error(`Tam ekran rejiminə keçid zamanı xəta: ${err.message} (${err.name})`);\n    });\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n      if (document.fullscreenElement) {\n        document.exitFullscreen();\n      }\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [exam, isLoading]);\n\n  const handleAnswerChange = (questionId: string, value: string) => {\n    setAnswers((prev) => ({ ...prev, [questionId]: value }));\n  };\n  \n  if (isLoading || !exam || !student) {\n    return (\n      <div className=\"container py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\n          <div className=\"lg:col-span-3\">\n            <Card>\n              <CardHeader>\n                <Skeleton className=\"h-10 w-3/4\" />\n                <Skeleton className=\"h-6 w-1/2\" />\n              </CardHeader>\n              <CardContent className=\"space-y-8\">\n                <Card className=\"p-6\"><Skeleton className=\"h-40 w-full\" /></Card>\n                <Card className=\"p-6\"><Skeleton className=\"h-40 w-full\" /></Card>\n              </CardContent>\n            </Card>\n          </div>\n          <aside className=\"space-y-6 lg:sticky top-24 h-min\">\n            <Skeleton className=\"h-20 w-full\" />\n            <Skeleton className=\"h-12 w-full\" />\n            <Skeleton className=\"h-12 w-full\" />\n          </aside>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container py-8\">\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\n        <div className=\"lg:col-span-3\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"font-headline text-3xl\">{exam.title}</CardTitle>\n              <CardDescription>Bütün sualları bacardığınız qədər cavablandırın. Hər sual {exam.pointsPerQuestion} bal dəyərindədir.</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <form className=\"space-y-8\">\n                {exam.questions.map((q, index) => (\n                  <Card key={q.id} className=\"p-6\">\n                    <div className=\"mb-4\">\n                      <Label className=\"text-lg font-semibold block\">\n                        Sual {index + 1}: {q.text}\n                      </Label>\n                      {q.imageUrl && (\n                        <div className=\"mt-4\">\n                          <div className=\"relative h-64 w-full\">\n                              <Image src={q.imageUrl} alt={`Sual ${index + 1} şəkli`} layout=\"fill\" objectFit=\"contain\" className=\"rounded-md\" />\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                    {q.type === 'multiple-choice' && q.options ? (\n                      <RadioGroup onValueChange={(value) => handleAnswerChange(q.id, value)}>\n                        <div className=\"space-y-2\">\n                          {q.options.map((option, i) => (\n                            <div key={i} className=\"flex items-center space-x-2\">\n                              <RadioGroupItem value={option} id={`${q.id}-${i}`} />\n                              <Label htmlFor={`${q.id}-${i}`}>{option}</Label>\n                            </div>\n                          ))}\n                        </div>\n                      </RadioGroup>\n                    ) : (\n                      <Textarea\n                        placeholder=\"Cavabınız...\"\n                        className=\"min-h-[120px]\"\n                        onChange={(e) => handleAnswerChange(q.id, e.target.value)}\n                      />\n                    )}\n                  </Card>\n                ))}\n              </form>\n            </CardContent>\n          </Card>\n        </div>\n        \n        <aside className=\"space-y-6 lg:sticky top-24 h-min\">\n          <ExamTimer endTime={exam.endTime} onTimeUp={() => handleFinishExam(false)} />\n          <Button className=\"w-full h-12\" onClick={() => handleFinishExam(false)}>\n            <Send className=\"mr-2\"/> İmtahanı bitir & Təhvil ver\n          </Button>\n           <Button variant=\"outline\" className=\"w-full\" onClick={() => router.back()}>\n            <ArrowLeft className=\"mr-2\"/> Geri Qayıt\n          </Button>\n        </aside>\n      </div>\n    </div>\n  );\n}\n\nexport default withAuth(ExamPage, ['student']);\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;;;AAjBA;;;;;;;;;;;;;;;;AAmBA,SAAS;;IACP,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,SAAS,OAAO,MAAM;IAE5B,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAkB;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAA0B,CAAC;IAChE,MAAM,iBAAiB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAC9B,MAAM,KAAK,CAAA,GAAA,sKAAA,CAAA,eAAY,AAAD,EAAE,4HAAA,CAAA,MAAG;IAE3B,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,IAAI,aAAa;gBACf,WAAW,KAAK,KAAK,CAAC;YACxB,OAAO;gBACL,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM;gDAAY;oBACd,IAAI,CAAC,QAAQ;oBACb,MAAM,UAAU,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,IAAI,SAAS;oBACjC,MAAM,WAAW,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE;oBAE9B,IAAI,SAAS,MAAM,IAAI;wBACnB,QAAQ;4BAAE,IAAI,SAAS,EAAE;4BAAE,GAAG,SAAS,IAAI,EAAE;wBAAC;oBAClD,OAAO;wBACH,MAAM;4BACF,SAAS;4BACT,OAAO;4BACP,aAAa;wBACjB;wBACA,OAAO,IAAI,CAAC;oBAChB;oBACA,aAAa;gBACjB;;YAEA;QACF;6BAAG;QAAC;QAAQ;QAAQ;QAAO;KAAG;IAE9B,MAAM,mBAAmB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;kDAAE,OAAO,WAAW,KAAK;YAC1D,IAAI,eAAe,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM;YACjD,eAAe,OAAO,GAAG;YAEzB,MAAM,gBAAwC;gBAC5C;gBACA,WAAW,QAAQ,EAAE;gBACrB;gBACA,aAAa,IAAI,OAAO,WAAW;gBACnC,kBAAkB;YACpB;YAEA,IAAI;gBACA,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,IAAI,gBAAgB;gBAC5C,IAAI,UAAU;oBACV,MAAM;wBACF,SAAS;wBACT,OAAO;wBACP,aAAa;wBACb,UAAU;oBACd;gBACJ,OAAO;oBACH,MAAM;wBACJ,OAAO;wBACP,aAAa;oBACf;gBACJ;gBACA,OAAO,IAAI,CAAC,CAAC,kBAAkB,CAAC;YACpC,EAAE,OAAM,OAAO;gBACX,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,MAAM;oBACF,SAAS;oBACT,OAAO;oBACP,aAAa;gBACjB;gBACA,eAAe,OAAO,GAAG,OAAO,cAAc;YAClD;QAEF;iDAAG;QAAC;QAAQ;QAAS;QAAS;QAAQ;QAAO;QAAM;KAAG;IAEtD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,IAAI,CAAC,QAAQ,WAAW;gBACtB;YACF;YAEA,MAAM;6DAAyB;oBAC7B,IAAI,SAAS,eAAe,KAAK,UAAU;wBACzC,iBAAiB;oBACnB;gBACF;;YAEA,MAAM;6DAAyB;oBAC7B,IAAI,CAAC,SAAS,iBAAiB,EAAE;wBAC/B,iBAAiB;oBACnB;gBACF;;YAEA,SAAS,eAAe,CAAC,iBAAiB,GAAG,KAAK;sCAAC,CAAA;oBACjD,QAAQ,KAAK,CAAC,CAAC,sCAAsC,EAAE,IAAI,OAAO,CAAC,EAAE,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;gBACpF;;YAEA,SAAS,gBAAgB,CAAC,oBAAoB;YAC9C,SAAS,gBAAgB,CAAC,oBAAoB;YAE9C;sCAAO;oBACL,SAAS,mBAAmB,CAAC,oBAAoB;oBACjD,SAAS,mBAAmB,CAAC,oBAAoB;oBACjD,IAAI,SAAS,iBAAiB,EAAE;wBAC9B,SAAS,cAAc;oBACzB;gBACF;;QACF,uDAAuD;QACvD;6BAAG;QAAC;QAAM;KAAU;IAEpB,MAAM,qBAAqB,CAAC,YAAoB;QAC9C,WAAW,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,WAAW,EAAE;YAAM,CAAC;IACxD;IAEA,IAAI,aAAa,CAAC,QAAQ,CAAC,SAAS;QAClC,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,mIAAA,CAAA,OAAI;;8CACH,6LAAC,mIAAA,CAAA,aAAU;;sDACT,6LAAC,uIAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;sDACpB,6LAAC,uIAAA,CAAA,WAAQ;4CAAC,WAAU;;;;;;;;;;;;8CAEtB,6LAAC,mIAAA,CAAA,cAAW;oCAAC,WAAU;;sDACrB,6LAAC,mIAAA,CAAA,OAAI;4CAAC,WAAU;sDAAM,cAAA,6LAAC,uIAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;;;;;;sDAC1C,6LAAC,mIAAA,CAAA,OAAI;4CAAC,WAAU;sDAAM,cAAA,6LAAC,uIAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAIhD,6LAAC;wBAAM,WAAU;;0CACf,6LAAC,uIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;0CACpB,6LAAC,uIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;0CACpB,6LAAC,uIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;IAK9B;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,mIAAA,CAAA,OAAI;;0CACH,6LAAC,mIAAA,CAAA,aAAU;;kDACT,6LAAC,mIAAA,CAAA,YAAS;wCAAC,WAAU;kDAA0B,KAAK,KAAK;;;;;;kDACzD,6LAAC,mIAAA,CAAA,kBAAe;;4CAAC;4CAA2D,KAAK,iBAAiB;4CAAC;;;;;;;;;;;;;0CAErG,6LAAC,mIAAA,CAAA,cAAW;0CACV,cAAA,6LAAC;oCAAK,WAAU;8CACb,KAAK,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,sBACtB,6LAAC,mIAAA,CAAA,OAAI;4CAAY,WAAU;;8DACzB,6LAAC;oDAAI,WAAU;;sEACb,6LAAC,oIAAA,CAAA,QAAK;4DAAC,WAAU;;gEAA8B;gEACvC,QAAQ;gEAAE;gEAAG,EAAE,IAAI;;;;;;;wDAE1B,EAAE,QAAQ,kBACT,6LAAC;4DAAI,WAAU;sEACb,cAAA,6LAAC;gEAAI,WAAU;0EACX,cAAA,6LAAC,gIAAA,CAAA,UAAK;oEAAC,KAAK,EAAE,QAAQ;oEAAE,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,MAAM,CAAC;oEAAE,QAAO;oEAAO,WAAU;oEAAU,WAAU;;;;;;;;;;;;;;;;;;;;;;gDAK7G,EAAE,IAAI,KAAK,qBAAqB,EAAE,OAAO,iBACxC,6LAAC,6IAAA,CAAA,aAAU;oDAAC,eAAe,CAAC,QAAU,mBAAmB,EAAE,EAAE,EAAE;8DAC7D,cAAA,6LAAC;wDAAI,WAAU;kEACZ,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,kBACtB,6LAAC;gEAAY,WAAU;;kFACrB,6LAAC,6IAAA,CAAA,iBAAc;wEAAC,OAAO;wEAAQ,IAAI,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE,GAAG;;;;;;kFACjD,6LAAC,oIAAA,CAAA,QAAK;wEAAC,SAAS,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE,GAAG;kFAAG;;;;;;;+DAFzB;;;;;;;;;;;;;;yEAQhB,6LAAC,uIAAA,CAAA,WAAQ;oDACP,aAAY;oDACZ,WAAU;oDACV,UAAU,CAAC,IAAM,mBAAmB,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;;;;;;;2CA5BnD,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;8BAsCzB,6LAAC;oBAAM,WAAU;;sCACf,6LAAC,sIAAA,CAAA,YAAS;4BAAC,SAAS,KAAK,OAAO;4BAAE,UAAU,IAAM,iBAAiB;;;;;;sCACnE,6LAAC,qIAAA,CAAA,SAAM;4BAAC,WAAU;4BAAc,SAAS,IAAM,iBAAiB;;8CAC9D,6LAAC,qMAAA,CAAA,OAAI;oCAAC,WAAU;;;;;;gCAAQ;;;;;;;sCAEzB,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAU,WAAU;4BAAS,SAAS,IAAM,OAAO,IAAI;;8CACtE,6LAAC,mNAAA,CAAA,YAAS;oCAAC,WAAU;;;;;;gCAAQ;;;;;;;;;;;;;;;;;;;;;;;;AAMzC;GAlNS;;QACQ,qIAAA,CAAA,YAAS;QACT,qIAAA,CAAA,YAAS;QACN,+HAAA,CAAA,WAAQ;;;KAHnB;6CAoNM,CAAA,GAAA,iIAAA,CAAA,UAAQ,AAAD,EAAE,UAAU;IAAC;CAAU","debugId":null}}]
}